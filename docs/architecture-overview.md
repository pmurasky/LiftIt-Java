# LiftIt Backend – Architecture Overview

## Core Architecture

- Java 25
- Spring Boot
- Gradle
- Separate repository from frontend
- YAGNI principle
- TDD (Test-Driven Development)

---

## Infrastructure

- Docker (local development + CI)
- GitHub Actions for CI
- Testcontainers for integration tests
- PostgreSQL database

---

## Database Strategy

### Migration
- Liquibase
- YAML changelogs
- Liquibase runs automatically on application startup in all environments

### Naming Conventions
- snake_case
- lowercase only
- plural table names

### Primary Keys
- Every table has:
  - `id BIGINT GENERATED BY DEFAULT AS IDENTITY`
  - Single-column primary key
- Sequences managed automatically by Postgres

### Audit Fields (Required on All Tables)
- `created_at TIMESTAMP WITH TIME ZONE`
- `created_by`
- `updated_at TIMESTAMP WITH TIME ZONE`
- `updated_by`

### Timestamp Standard
- All timestamps use `TIMESTAMP WITH TIME ZONE`
- Stored in UTC

### Deletion Strategy
- Hard deletes only
- Every deletion recorded in a separate deletion audit mechanism
- Deletion auditing applies to all tables

---

## Security & Identity

- Authentication required for all endpoints
- Auth0 as external identity provider
- Auth0 Hosted Universal Login
- Spring Security Resource Server (JWT validation)
- Local `users` table for application profile data
- Authentication handled externally; profiles stored internally

---

## API Design

- REST (no GraphQL, no gRPC)
- OpenAPI contract maintained
- Versioned base path: `/api/v1/...`
- Plural resource names
- No verbs in URLs
- HTTP method conventions:
  - POST → Create
  - GET → Retrieve
  - PATCH → Partial update
  - DELETE → Hard delete
  - PUT avoided unless true full-replacement required
- Standard HTTP status codes (200, 201, 204, 400, 401, 403, 404)

---

## Engineering Philosophy

- YAGNI (avoid premature abstraction)
- TDD
- Simplicity over speculative scalability
- Industry-standard REST practices
- Schema discipline and consistency

